package mix;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;

public class Main_Menu extends JPanel implements ActionListener {

    private final List<String> CLASS_NAMES = Class_Name.CLASS_NAMES;
    private DefaultTableModel model; // model??? ???????? ??????
    private JScrollPane scrollPane; // ???????? ????????? ???????? ??????

    public Main_Menu() {
//    	this.model = new DefaultTableModel(new String[]{"?????", "게시??", "?????????", "????????????"}, 0);
        showData();
        
    }

    private void showData() {
    	 
        JPanel mainPanel = new JPanel(new BorderLayout());
        mainPanel.setPreferredSize(new Dimension(1100, 770));
        
        // 버튼 ?????? 버튼 panel
        JPanel buttonPanel2 = new JPanel(new FlowLayout(FlowLayout.RIGHT));

        JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT, 0, 0));
        mainPanel.add(buttonPanel, BorderLayout.NORTH);

        try {
            String query1 = Query.SELECT_CLASS_NAMEUP;
            ResultSet rs1 = QueryExecutor.executeQuery(query1);

            List<String> classNames = new ArrayList<>();
            while (rs1.next()) {
                String className = rs1.getString("class_name");
                classNames.add(className);
            }
            rs1.close();
            for (String className : classNames) {
                JButton button = new JButton(className);
                button.setPreferredSize(new Dimension(275, 82));
                button.setBackground(Color.WHITE);
                button.setFont(new Font("Inter", Font.PLAIN, 18));
                button.setBorderPainted(false);
                button.addActionListener(this); // ActionListener 추??
                buttonPanel.add(button);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        add(mainPanel);
        // ?????? ??? 바로 출력
    }
    
    @Override
    public void actionPerformed(ActionEvent e) {
        JButton source = (JButton) e.getSource(); // ???벤트?? 발생??? 버튼 ??????????
        String className = source.getText(); // 버튼??? ?????????(????????? ?????) ??????????

        // ?? 버튼??? ????????? if문으?? 구분?????? ??????
        if (className.equals(CLASS_NAMES.get(0))) {
            // 첫번?? 버튼??? ?????????????? ?????? ??????
            System.out.println("1번째 버튼??? ????????????????????.");
       
            ////////////////////////////////////////////////////////////////////
        } else if (className.equals(CLASS_NAMES.get(1))) {
            // ???번째 버튼??? ?????????????? ?????? ??????
            System.out.println("2번째 버튼??? ????????????????????.");
           
        } else if (className.equals(CLASS_NAMES.get(2))) {
            // ???번째 버튼??? ?????????????? ?????? ??????
            System.out.println("3번째 버튼??? ????????????????????.");
            ProfileMgr ProfileMgr = new ProfileMgr(model);
            ProfileMgr.javaData(Query.SELECT_JAVA_TABLE);
        } else if (className.equals(CLASS_NAMES.get(3))) {
            // ???번째 버튼??? ?????????????? ?????? ??????
            System.out.println("4번째 버튼??? ????????????????????.");
         
        }
        // ?????? ???????? ????????? 만큼 추????? ??? ????????????.
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            JFrame frame = new JFrame("Main");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.add(new Main_Menu());
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        });
    }
}